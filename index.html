<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RetailBook — Industry Ecosystem</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
:root {
  --navy-900: #060d1f;
  --navy-800: #0a1628;
  --navy-700: #0f1d35;
  --navy-600: #162544;
  --navy-400: #2a4270;
  --coral: #ff3366;
  --coral-light: #ff5c8a;
  --coral-dark: #e6204f;
  --coral-glow: rgba(255, 51, 102, 0.35);
  --teal: #22d3ee;
  --glass-bg: rgba(15, 29, 53, 0.55);
  --glass-border: rgba(255, 255, 255, 0.07);
  --glass-shine: rgba(255, 255, 255, 0.03);
  --text-primary: #e8edf5;
  --text-secondary: #8a9bbd;
  --text-muted: #4a5f85;
  --font-display: 'Outfit', sans-serif;
  --font-body: 'DM Sans', sans-serif;
}
html { font-size: 16px; -webkit-font-smoothing: antialiased; }
body {
  font-family: var(--font-body);
  background: var(--navy-900);
  color: var(--text-primary);
  min-height: 100vh;
  overflow-x: hidden;
}

/* ── Backgrounds ── */
body::before {
  content: '';
  position: fixed; inset: 0;
  background:
    radial-gradient(ellipse 80% 60% at 50% 0%, rgba(255,51,102,0.07), transparent 60%),
    radial-gradient(ellipse 60% 50% at 80% 80%, rgba(34,211,238,0.04), transparent 50%),
    linear-gradient(180deg, var(--navy-900), #080e20);
  z-index: 0; pointer-events: none;
}
.grid-bg {
  position: fixed; inset: 0; z-index: 0; pointer-events: none; opacity: 0.25;
  background-image:
    linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
  background-size: 60px 60px;
  mask-image: radial-gradient(ellipse 70% 60% at 50% 40%, black 30%, transparent 80%);
  -webkit-mask-image: radial-gradient(ellipse 70% 60% at 50% 40%, black 30%, transparent 80%);
}
canvas#particles { position: fixed; inset: 0; z-index: 0; pointer-events: none; }
.uk-map {
  position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
  height: 100vh; width: calc(100vh * 400 / 650); z-index: 1; pointer-events: none;
  opacity: 0.045;
}

/* ── Page ── */
.page { position: relative; z-index: 1; max-width: 1200px; margin: 0 auto; padding: 3rem 2rem 4rem; }

/* ── Header ── */
.page-title {
  text-align: center; margin-bottom: 2.5rem; animation: fadeUp .8s ease-out both;
  font-family: var(--font-display); font-weight: 300;
  font-size: clamp(1rem, 2vw, 1.35rem);
  color: var(--text-muted); line-height: 1.3;
}
.page-title strong { color: var(--text-secondary); font-weight: 600; }
.header { text-align: center; margin-bottom: 1.5rem; animation: fadeUp .8s .1s ease-out both; }
.logo { display: inline-block; margin-bottom: 0; }
.logo-svg { height: 44px; width: auto; display: block; }

/* ── Hierarchy: Logo → Equity/Debt → Private/Public/Sovereign ── */
.hierarchy {
  display: flex; flex-direction: column; align-items: center;
  margin-bottom: 3.5rem; animation: fadeUp .8s .15s ease-out both;
}
.h-connector { width: 1px; height: 24px; background: rgba(255,255,255,0.1); }
.h-row {
  display: flex; justify-content: center; gap: 3rem;
  position: relative; padding: .5rem 0;
}
/* Horizontal bridge line behind a row */
.h-row.bridged::before {
  content: ''; position: absolute; top: 50%; left: 0; right: 0;
  height: 1px; background: rgba(255,255,255,0.08); transform: translateY(-50%);
}
.h-node {
  position: relative; z-index: 1;
  font-family: var(--font-display); font-weight: 600; font-size: .96rem;
  letter-spacing: .15em; text-transform: uppercase; color: var(--text-secondary);
  background: var(--navy-900); padding: 0 .8rem;
}
.pills { display: flex; gap: .6rem; flex-wrap: wrap; justify-content: center; }
.pill {
  position: relative; z-index: 1;
  padding: .5rem 1.5rem; border-radius: 100px;
  font-family: var(--font-display); font-weight: 700; font-size: .98rem;
  background: linear-gradient(135deg, var(--coral), var(--coral-dark));
  color: #fff; box-shadow: 0 4px 18px var(--coral-glow);
  transition: transform .2s, box-shadow .2s; cursor: default;
}
.pill:hover { transform: translateY(-2px) scale(1.04); box-shadow: 0 8px 28px rgba(255,51,102,.45); }

/* ══════════════════════════════════════
   PIPELINE — 3-ROW GRID APPROACH
   Top labels | dots+line | bottom labels
   ══════════════════════════════════════ */
.pipeline-section { margin-bottom: 3.5rem; animation: fadeUp .8s .3s ease-out both; }
.pipeline-heading {
  text-align: center; font-family: var(--font-display);
  font-size: .84rem; font-weight: 600; text-transform: uppercase;
  letter-spacing: .2em; color: var(--text-muted); margin-bottom: 2rem;
}

.pipeline {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  grid-template-rows: auto auto auto;
  row-gap: 8px;
  max-width: 1000px;
  margin: 0 auto;
  position: relative;
}

/* Row 1: labels for ODD columns (above the line) */
.pl-top { grid-row: 1; display: flex; justify-content: center; align-items: flex-end; min-height: 36px; }
.pl-top .pl-text {
  font-family: var(--font-display); font-weight: 600; font-size: .9rem;
  color: var(--text-secondary); text-align: center; line-height: 1.3;
}
/* Empty cells in row 1 for even columns */
.pl-top.empty { visibility: hidden; }

/* Row 2: all 7 dots with a continuous line behind */
.pl-mid {
  grid-row: 2; display: flex; justify-content: center; align-items: center;
  position: relative; z-index: 2; height: 24px;
}
.pl-dot {
  width: 18px; height: 18px; border-radius: 50%;
  background: var(--coral); border: 3px solid var(--navy-800);
  box-shadow: 0 0 0 3px rgba(255,51,102,.2), 0 0 12px var(--coral-glow);
  transition: transform .25s, box-shadow .25s;
  cursor: default;
  animation: nodePulse 3s ease-in-out infinite;
}
.pl-mid:nth-of-type(2) .pl-dot { animation-delay: .4s; }
.pl-mid:nth-of-type(3) .pl-dot { animation-delay: .8s; }
.pl-mid:nth-of-type(4) .pl-dot { animation-delay: 1.2s; }
.pl-mid:nth-of-type(5) .pl-dot { animation-delay: 1.6s; }
.pl-mid:nth-of-type(6) .pl-dot { animation-delay: 2s; }
.pl-mid:nth-of-type(7) .pl-dot { animation-delay: 2.4s; }
.pl-dot:hover {
  transform: scale(1.4);
  box-shadow: 0 0 0 5px rgba(255,51,102,.3), 0 0 28px rgba(255,51,102,.5);
}

@keyframes nodePulse {
  0%, 100% { box-shadow: 0 0 0 3px rgba(255,51,102,.2), 0 0 12px var(--coral-glow); }
  50% { box-shadow: 0 0 0 6px rgba(255,51,102,.1), 0 0 22px rgba(255,51,102,.4); }
}

/* The horizontal line behind the dots */
.pipeline-line {
  position: absolute;
  top: 50%; left: 7%; right: 7%;
  height: 2px; transform: translateY(-50%);
  background: linear-gradient(90deg, var(--coral), var(--coral-light), var(--coral));
  border-radius: 2px; box-shadow: 0 0 16px var(--coral-glow);
  z-index: 0;
}
/* Animated glow streak */
.pipeline-line::after {
  content: ''; position: absolute; top: -1px;
  width: 60px; height: 4px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.7), transparent);
  border-radius: 2px; animation: streak 4s ease-in-out infinite;
}
@keyframes streak {
  0% { left: -60px; opacity: 0; }
  10% { opacity: .8; }
  90% { opacity: .8; }
  100% { left: calc(100% + 60px); opacity: 0; }
}

/* Row 3: labels for EVEN columns (below the line) */
.pl-bot { grid-row: 3; display: flex; justify-content: center; align-items: flex-start; min-height: 36px; }
.pl-bot .pl-text {
  font-family: var(--font-display); font-weight: 600; font-size: .9rem;
  color: var(--text-secondary); text-align: center; line-height: 1.3;
}
.pl-bot.empty { visibility: hidden; }

/* ── Cards ── */
.cards-section { margin-bottom: 4rem; animation: fadeUp .8s .5s ease-out both; }
.cards-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; }
.card {
  background: var(--glass-bg); border: 1px solid var(--glass-border);
  border-radius: 16px; overflow: hidden;
  backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
  box-shadow: 0 8px 28px rgba(0,0,0,.25), inset 0 1px 0 var(--glass-shine);
  transition: transform .3s, box-shadow .3s, border-color .3s;
}
.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 16px 40px rgba(0,0,0,.35), inset 0 1px 0 var(--glass-shine);
  border-color: rgba(255,51,102,.15);
}
.card-head {
  padding: 1.1rem 1.3rem; border-bottom: 1px solid var(--glass-border);
  display: flex; align-items: center; gap: .65rem;
}
.card-icon {
  width: 32px; height: 32px; border-radius: 8px;
  display: flex; align-items: center; justify-content: center; flex-shrink: 0;
}
.card:nth-child(1) .card-icon { background: linear-gradient(135deg, #6366f1, #4f46e5); box-shadow: 0 4px 10px rgba(99,102,241,.3); }
.card:nth-child(2) .card-icon { background: linear-gradient(135deg, var(--coral), var(--coral-dark)); box-shadow: 0 4px 10px var(--coral-glow); }
.card:nth-child(3) .card-icon { background: linear-gradient(135deg, var(--teal), #06b6d4); box-shadow: 0 4px 10px rgba(34,211,238,.3); }
.card-head-text h3 { font-family: var(--font-display); font-weight: 700; font-size: .95rem; color: #fff; }
.card-head-text span { font-size: .7rem; color: var(--text-muted); }
.card-body { padding: .8rem 1.3rem 1.2rem; }
.card-body ul { list-style: none; }
.card-body li {
  padding: .6rem 0; border-bottom: 1px solid rgba(255,255,255,.04);
  font-weight: 500; font-size: .9rem; color: var(--text-secondary);
  display: flex; align-items: center; gap: .6rem;
  transition: color .2s, padding-left .2s;
  /* Start hidden, animated in by JS */
  opacity: 0; transform: translateY(12px);
}
.card-body li.revealed {
  animation: dropIn .5s ease-out forwards;
}
.card-body li:last-child { border-bottom: none; }
.card-body li::before { content: ''; width: 5px; height: 5px; border-radius: 50%; flex-shrink: 0; }
.card:nth-child(1) li::before { background: #818cf8; }
.card:nth-child(2) li::before { background: var(--coral-light); }
.card:nth-child(3) li::before { background: var(--teal); }
.card:hover li { color: var(--text-primary); }

@keyframes dropIn {
  0% { opacity: 0; transform: translateY(12px); }
  100% { opacity: 1; transform: translateY(0); }
}

/* ── Impact ── */
.impact {
  text-align: center; padding: 3rem 2rem; margin-bottom: 3rem;
  position: relative; animation: fadeUp .8s .7s ease-out both;
}
.impact::before {
  content: ''; position: absolute; inset: 0; border-radius: 20px;
  background: linear-gradient(135deg, rgba(255,51,102,.05), rgba(34,211,238,.02));
  border: 1px solid rgba(255,51,102,.06);
}
.impact-stat {
  font-family: var(--font-display); font-weight: 900;
  font-size: clamp(2.8rem, 6vw, 4.5rem);
  background: linear-gradient(135deg, var(--coral), var(--coral-light), #f0c040);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text; line-height: 1; margin-bottom: .8rem;
}
.impact-text {
  font-family: var(--font-display); font-weight: 500;
  font-size: clamp(.95rem, 1.8vw, 1.25rem);
  color: var(--text-secondary); line-height: 1.6;
  max-width: 600px; margin: 0 auto 1rem;
}
.impact-text em { font-style: normal; color: var(--coral-light); font-weight: 600; }
.impact-highlight {
  font-family: var(--font-display); font-weight: 700;
  font-size: clamp(1rem, 1.8vw, 1.35rem); color: #fff;
}

/* ── Tagline ── */
.tagline { text-align: center; padding: 2rem 0 1rem; animation: fadeUp .8s .85s ease-out both; }
.tagline-text {
  display: inline-flex; align-items: center; gap: .8rem;
  font-family: var(--font-display); font-weight: 800;
  font-size: clamp(.8rem, 1.4vw, 1rem);
  letter-spacing: .18em; text-transform: uppercase;
}
.tagline-text span:nth-child(1) { color: var(--text-primary); }
.tagline-text span:nth-child(2) { color: var(--text-muted); font-weight: 400; font-size: .85em; }
.tagline-text span:nth-child(3) { color: var(--coral-light); }
.rb-mark { display: flex; justify-content: center; margin-top: 1.5rem; }
.rb-mark-svg { height: 28px; width: auto; }

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ── Responsive ── */
@media (max-width: 960px) {
  .cards-grid { grid-template-columns: 1fr; max-width: 400px; margin: 0 auto; }
  .pipeline { grid-template-columns: 1fr; grid-template-rows: none; row-gap: 0; max-width: 260px; }
  .pl-top, .pl-bot, .pl-mid { grid-column: 1; grid-row: auto; }
  .pl-top.empty, .pl-bot.empty { display: none; }
  .pipeline-line { display: none; }
  .pl-top, .pl-bot { justify-content: flex-start; min-height: auto; }
  .pl-top .pl-text, .pl-bot .pl-text { text-align: left; }
  .pl-mid { justify-content: flex-start; height: auto; padding: .4rem 0; }
  /* Reorder: each node = label + dot in a row */
  .pipeline { display: flex; flex-direction: column; gap: .8rem; }
  .pl-top.empty, .pl-bot.empty { display: none; }
  .pipe-node-mobile { display: flex; align-items: center; gap: .6rem; }
}
@media (max-width: 600px) {
  .page { padding: 1.5rem 1rem 3rem; }
  .logo-svg { height: 32px; }
  .branch-row { gap: 2.5rem; }
}
</style>
</head>
<body>

<div class="grid-bg"></div>
<canvas id="particles"></canvas>

<!-- Faint UK map silhouette (from Natural Earth 110m data, public domain) -->
<svg class="uk-map" viewBox="0 0 400 650" xmlns="http://www.w3.org/2000/svg">
  <path d="M73.5,205.4 L44.1,197.4 20.0,197.9 28.0,177.1 20.0,156.2 52.6,154.6 94.4,178.7 73.5,205.4Z" fill="white"/>
  <path d="M194.2,223.4 L194.3,223.4 199.9,200.8 173.9,176.9 173.3,176.4 126.1,169.5 116.9,159.0 131.0,141.6 118.2,130.9 97.3,149.2 94.9,111.8 75.3,92.0 89.5,51.7 119.7,20.1 150.8,23.2 197.7,20.0 156.1,62.1 195.7,56.7 238.3,56.9 228.2,88.6 193.2,123.5 233.4,126.0 236.5,130.1 271.2,176.0 297.8,182.2 321.8,226.5 332.8,241.9 380.0,249.3 375.2,274.2 355.4,285.6 370.9,305.6 335.9,326.1 283.9,325.7 217.7,336.4 199.5,328.8 173.9,346.9 137.9,342.5 110.6,357.4 89.9,349.6 146.9,308.7 181.7,300.4 181.4,300.3 120.7,293.9 109.6,278.4 150.4,266.3 129.1,245.3 136.4,219.9 194.2,223.4Z" fill="white"/>
</svg>

<div class="page">

  <h1 class="page-title">Where does <strong>RetailBook</strong> sit within the Ecosystem?</h1>

  <!-- Header -->
  <header class="header">
    <div class="logo"><img src="retailbook-logo-light.svg" alt="RetailBook" class="logo-svg"></div>
  </header>

  <!-- Hierarchy: Logo → Equity/Debt → Private/Public/Sovereign -->
  <section class="hierarchy">
    <div class="h-connector"></div>
    <div class="h-row bridged">
      <span class="h-node">Equity</span>
      <span class="h-node">Debt</span>
    </div>
    <div class="h-connector"></div>
    <div class="h-row bridged">
      <div class="pills">
        <span class="pill">Private</span>
        <span class="pill">Public</span>
        <span class="pill">Sovereign</span>
      </div>
    </div>
  </section>

  <!-- Pipeline: 3-row grid -->
  <section class="pipeline-section">
    <div class="pipeline-heading">Ecosystem Participants</div>
    <div class="pipeline">
      <!-- The line behind all dots -->
      <div class="pipeline-line"></div>

      <!-- Row 1: top labels (odd cols) + empty (even cols) -->
      <div class="pl-top" style="grid-column:1"><span class="pl-text">Scale-up<br>Institute</span></div>
      <div class="pl-top empty" style="grid-column:2"></div>
      <div class="pl-top" style="grid-column:3"><span class="pl-text">Lawyers</span></div>
      <div class="pl-top empty" style="grid-column:4"></div>
      <div class="pl-top" style="grid-column:5"><span class="pl-text">Banks</span></div>
      <div class="pl-top empty" style="grid-column:6"></div>
      <div class="pl-top" style="grid-column:7"><span class="pl-text">British Business<br>Bank</span></div>

      <!-- Row 2: all 7 dots -->
      <div class="pl-mid" style="grid-column:1"><div class="pl-dot"></div></div>
      <div class="pl-mid" style="grid-column:2"><div class="pl-dot"></div></div>
      <div class="pl-mid" style="grid-column:3"><div class="pl-dot"></div></div>
      <div class="pl-mid" style="grid-column:4"><div class="pl-dot"></div></div>
      <div class="pl-mid" style="grid-column:5"><div class="pl-dot"></div></div>
      <div class="pl-mid" style="grid-column:6"><div class="pl-dot"></div></div>
      <div class="pl-mid" style="grid-column:7"><div class="pl-dot"></div></div>

      <!-- Row 3: bottom labels (even cols) + empty (odd cols) -->
      <div class="pl-bot empty" style="grid-column:1"></div>
      <div class="pl-bot" style="grid-column:2"><span class="pl-text">Financial Conduct<br>Authority</span></div>
      <div class="pl-bot empty" style="grid-column:3"></div>
      <div class="pl-bot" style="grid-column:4"><span class="pl-text">London Stock<br>Exchange</span></div>
      <div class="pl-bot empty" style="grid-column:5"></div>
      <div class="pl-bot" style="grid-column:6"><span class="pl-text">HM Treasury</span></div>
      <div class="pl-bot empty" style="grid-column:7"></div>
    </div>
  </section>

  <!-- Entity Cards -->
  <section class="cards-section">
    <div class="cards-grid">
      <div class="card">
        <div class="card-head">
          <div class="card-icon"><svg width="16" height="16" fill="none" viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
          <div class="card-head-text"><h3>Private Co</h3><span>Pre-IPO &amp; growth capital</span></div>
        </div>
        <div class="card-body"><ul>
          <li>PISCES</li>
          <li>Primary raises</li>
          <li>Secondary raises</li>
        </ul></div>
      </div>
      <div class="card">
        <div class="card-head">
          <div class="card-icon"><svg width="16" height="16" fill="none" viewBox="0 0 24 24"><rect x="2" y="7" width="20" height="14" rx="2" stroke="#fff" stroke-width="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" stroke="#fff" stroke-width="2"/></svg></div>
          <div class="card-head-text"><h3>Public Issuer</h3><span>Listed equity &amp; bonds</span></div>
        </div>
        <div class="card-body"><ul>
          <li>IPOs</li>
          <li>Plain Vanilla Listed Bonds</li>
          <li>Follow-ons</li>
        </ul></div>
      </div>
      <div class="card">
        <div class="card-head">
          <div class="card-icon"><svg width="16" height="16" fill="none" viewBox="0 0 24 24"><path d="M3 21h18M5 21V7l7-4 7 4v14M9 21v-4h6v4" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
          <div class="card-head-text"><h3>Gov Agencies</h3><span>Sovereign debt instruments</span></div>
        </div>
        <div class="card-body"><ul>
          <li>UK Treasury Bills</li>
          <li>Infrastructure Bonds</li>
          <li>Scottish Gov Bonds</li>
        </ul></div>
      </div>
    </div>
  </section>

  <!-- Impact Statement -->
  <section class="impact">
    <div class="impact-stat" id="statCounter">£600bn</div>
    <p class="impact-text">
      Mobilising <em>UK retail capital</em> into productive primary markets
      could drive a <em>2% GDP uplift</em>,
    </p>
    <p class="impact-highlight">accelerate and strengthen Britain's regional growth engine</p>
  </section>

  <!-- Tagline -->
  <footer class="tagline">
    <div class="tagline-text">
      <span>Confident Capital</span>
      <span>Meets</span>
      <span>Trusted Capability</span>
    </div>
    <div class="rb-mark"><img src="retailbook-logo-light.svg" alt="RB" class="rb-mark-svg"></div>
  </footer>

</div>

<script>
(() => {
  const canvas = document.getElementById('particles');
  const ctx = canvas.getContext('2d');
  let w, h, particles = [];
  const COUNT = 45, DIST = 140;

  function resize() { w = canvas.width = innerWidth; h = canvas.height = innerHeight; }
  function init() {
    particles = [];
    for (let i = 0; i < COUNT; i++)
      particles.push({ x: Math.random()*w, y: Math.random()*h, vx: (Math.random()-.5)*.3, vy: (Math.random()-.5)*.3, r: Math.random()*1.5+.5 });
  }
  function draw() {
    ctx.clearRect(0, 0, w, h);
    for (let i = 0; i < particles.length; i++) {
      const p = particles[i];
      for (let j = i+1; j < particles.length; j++) {
        const q = particles[j], dx = p.x-q.x, dy = p.y-q.y, d = Math.sqrt(dx*dx+dy*dy);
        if (d < DIST) { ctx.beginPath(); ctx.moveTo(p.x,p.y); ctx.lineTo(q.x,q.y); ctx.strokeStyle = `rgba(255,51,102,${(1-d/DIST)*.07})`; ctx.lineWidth = .7; ctx.stroke(); }
      }
      ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fillStyle = 'rgba(255,51,102,.12)'; ctx.fill();
      p.x += p.vx; p.y += p.vy;
      if (p.x<0||p.x>w) p.vx*=-1; if (p.y<0||p.y>h) p.vy*=-1;
    }
    requestAnimationFrame(draw);
  }
  window.addEventListener('resize', () => { resize(); init(); });
  resize(); init(); draw();

  // Card bullet drop-in animation
  const cards = document.querySelectorAll('.card');
  const cardObs = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const items = entry.target.querySelectorAll('li');
        items.forEach((li, i) => {
          setTimeout(() => li.classList.add('revealed'), i * 150);
        });
        cardObs.unobserve(entry.target);
      }
    });
  }, { threshold: 0.3 });
  cards.forEach(c => cardObs.observe(c));

  // Counter
  const el = document.getElementById('statCounter');
  let done = false;
  new IntersectionObserver(([e]) => {
    if (e.isIntersecting && !done) {
      done = true; const t0 = performance.now();
      (function step(now) {
        const p = Math.min((now-t0)/2000, 1);
        el.textContent = `£${Math.round((1-Math.pow(1-p,3))*600)}bn`;
        if (p < 1) requestAnimationFrame(step);
      })(t0);
    }
  }, { threshold: .5 }).observe(el);
})();
</script>
</body>
</html>
